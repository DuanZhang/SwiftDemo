//: Playground - noun: a place where people can play

import UIKit

/*:
 ## é€’å½’: è‡ªå·±è°ƒç”¨è‡ªå·±çš„å‡½æ•°
 ### é€’å½’å‡½æ•°åŒ…æ‹¬ä¸¤éƒ¨åˆ†1ã€åŸºçº¿æ¡ä»¶ï¼ˆä½¿å‡½æ•°ä¸å†è°ƒç”¨è‡ªå·±ï¼‰ï¼Œé¿å…æ— é™å¾ªç¯2ã€é€’å½’æ¡ä»¶ï¼ˆä½¿å‡½æ•°è°ƒç”¨è‡ªå·±ï¼‰
 ### ä½¿ç”¨åœºæ™¯ï¼šå€’è®¡æ—¶ã€æ±‚nï¼ã€æ£‹ç›˜é—®é¢˜ç­‰è¶…çº§å¤šåº”ç”¨åœºæ™¯
 > ä¾‹å¦‚ï¼š
 å†™ä¸€ä¸ªä»1åˆ°nçš„æ±‚å’Œå‡½æ•°ï¼Œæœ‰ä»¥ä¸‹æ–¹å¼
 1. ç­‰å·®æ•°åˆ—æ±‚å’Œ
 2. å¾ªç¯
 3. é€’å½’
ä»æ•ˆç‡æ¥è¯´æ— ç–‘ç¬¬ä¸€ä¸ªæ˜¯æœ€é«˜çš„ï¼Œæ­¤å¤„ä¸»è¦æ¼”ç¤ºé€’å½’çš„åšæ³•
 */

//é€’å½’
func sum(_ n: Int) -> Int {
    if n == 0 {
        return 0
    }
    return n + sum(n - 1)
}

sum(100)

/*:
sum(1000000000)
error: Execution was interrupted, reason: EXC_BAD_ACCESS (code=2, address=0x7ffeec495ff8).
ä¸ºä»€ä¹ˆä¼šæŠ¥é”™å‘¢ï¼Ÿå› ä¸ºæ¯æ¬¡å¯¹sumçš„é€’å½’éƒ½è¦åœ¨è°ƒç”¨æ ˆä¸Šä¿å­˜å½“å‰çŠ¶æ€ï¼Œå¦åˆ™ä¸èƒ½è®¡ç®—åˆ°n + sumï¼ˆn - 1ï¼‰ã€‚å½“nå¾ˆå¤§ï¼Œæ ˆå¾ˆæ·±ï¼Œæ ˆæº¢å‡ºã€‚å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å°¾é€’å½’
é‚£ä¹ˆä»€ä¹ˆæ˜¯å°¾é€’å½’å‘¢ï¼Ÿä¸ºä»€ä¹ˆå¯ä»¥è§£å†³æ ˆæº¢å‡ºçš„é—®é¢˜
å°¾é€’å½’å°±æ˜¯è®©å‡½æ•°çš„æœ€åä¸€ä¸ªåŠ¨ä½œæ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„å½¢å¼ï¼Œè¿™ä¸ªè°ƒç”¨çš„è¿”å›å€¼å°†ç›´æ¥è¢«å½“å‰å‡½æ•°è¿”å›ï¼Œä»è€Œé¿å…åœ¨æ ˆä¸Šä¿å­˜çŠ¶æ€ï¼Œè¿™æ ·ç¨‹åºæ¯æ¬¡éƒ½æ˜¯ç›´æ¥æ›´æ–°æœ€åçš„æ ˆå¸§ï¼Œè€Œä¸æ˜¯æ–°å»ºï¼Œä»è€Œé¿å…æ ˆæº¢å‡ºã€‚
 
æ›´è¯¦ç»†çš„è‡ªå·±å»æ¢ç´¢å§ğŸ˜Š(è„‘è¡¥äº†ç½—æ°çš„æœ€åè¯­å½•)
 */

func tailSum(_ n: Int, _ current: Int = 0) -> Int {
    if n == 0 {
        return current
    }
    return tailSum( n - 1, current + n )
}

tailSum(10)

func tailSum1(_ n: Int) -> Int {
    func sumInternal (_ n: Int, current: Int ) -> Int {
        if n == 0 {
            return 0
        }
        return sumInternal(n - 1 , current: current + n)
    }
    return sumInternal(n, current: 0)
}

tailSum1(10)
